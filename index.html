<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <!-- customize head -->
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="https://store.heytapimage.com/cdo-portal/feedback/202110/30/d43c41c5d257c9bc36366e310374fb19.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="no-referrer">
    <script src="js/aliyun-web-office-sdk.min.js"></script>
    <script src="js/hls.min.js"></script>
    <title>Loading...</title>
    <script>
      if(location.protocol!=='http:'){
        window.location.href = 'http:' + window.location.href.slice(location.protocol.length)
      }
      if(!localStorage.getItem("API_SERVER")){
        // API服务地址，运行alist后用纯ip+端口访问得到
        localStorage.setItem("API_SERVER","http://60.205.185.202:5244/")
      }
      if(!localStorage.getItem("API_SERVER").endsWith('/')){
        localStorage.setItem("API_SERVER",localStorage.getItem("API_SERVER")+'/')
      }
      if(!localStorage.getItem("DEPLOY_PATH")){
        // 部署路径，对应的是gitee的仓库名
        //记得将打包生成的js全部做一下替换，将
        // "assets/
        // 替换为
        // localStorage.getItem("DEPLOY_PATH")+"assets/
        // 以应用部署路径
        localStorage.setItem("DEPLOY_PATH","/netdisk/")
      }
      if(!localStorage.getItem("DEPLOY_PATH").endsWith('/')){
        localStorage.setItem("DEPLOY_PATH",localStorage.getItem("DEPLOY_PATH")+'/')
      }
      if(location.search.startsWith('?path=')){
        //gitee会将路径访问弄成404，所以利用404页面跳转到?path，再利用path参数强制重定向到正确路径
        let redirect_path = location.search.slice('?path='.length)
        localStorage.setItem('netdisk_path',redirect_path)
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- customize body -->
  </body>
</html>
